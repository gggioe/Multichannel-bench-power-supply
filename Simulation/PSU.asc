Version 4
SHEET 1 2200 1176
WIRE 256 128 208 128
WIRE 464 128 464 80
WIRE 464 128 352 128
WIRE 512 128 464 128
WIRE 640 128 640 80
WIRE 640 128 592 128
WIRE 784 128 640 128
WIRE 928 128 784 128
WIRE 640 160 640 128
WIRE -752 192 -768 192
WIRE -736 192 -752 192
WIRE -608 192 -656 192
WIRE -608 208 -608 192
WIRE 784 224 784 128
WIRE 928 240 928 128
WIRE 208 272 176 272
WIRE 640 272 640 240
WIRE 640 272 576 272
WIRE -752 288 -752 192
WIRE -688 288 -752 288
WIRE 304 288 304 192
WIRE 304 288 272 288
WIRE -528 304 -624 304
WIRE -448 304 -528 304
WIRE -176 304 -208 304
WIRE -48 304 -96 304
WIRE 0 304 -48 304
WIRE 128 304 80 304
WIRE 208 304 128 304
WIRE 640 304 640 272
WIRE -720 320 -768 320
WIRE -688 320 -720 320
WIRE -48 368 -48 304
WIRE 128 368 128 304
WIRE 784 384 784 288
WIRE -720 432 -720 320
WIRE -688 432 -720 432
WIRE -528 432 -528 304
WIRE -96 448 -208 448
WIRE -48 512 -48 464
WIRE 128 512 128 432
FLAG -496 -32 VCC
FLAG -496 48 0
FLAG 208 128 VCC
FLAG 928 320 0
FLAG 240 256 VCC
FLAG 640 384 0
FLAG -400 -32 Vref
FLAG -400 48 0
FLAG -208 304 Vref
FLAG -608 -32 -VCC
FLAG -608 48 0
FLAG -48 512 0
FLAG -320 -32 Iref
FLAG -320 48 0
FLAG -240 416 VCC
FLAG -240 480 -VCC
FLAG -272 432 Iref
FLAG 640 80 RS-
FLAG 464 80 RS+
FLAG -448 304 Isense
FLAG -272 464 Isense
FLAG -848 320 RS-
FLAG -848 192 RS+
FLAG -656 272 -VCC
FLAG -656 336 VCC
FLAG -608 208 0
FLAG 240 320 -VCC
FLAG 576 272 Vsense
FLAG 176 272 Vsense
FLAG 784 384 0
FLAG 128 512 0
SYMBOL voltage -496 -48 R0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL res 624 144 R0
SYMATTR InstName R2
SYMATTR Value 120k
SYMBOL res 624 288 R0
SYMATTR InstName R3
SYMATTR Value 30k
SYMBOL voltage -400 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -608 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -1
SYMBOL voltage -320 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 2
SYMBOL res 608 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.01
SYMBOL res 912 224 R0
SYMATTR InstName R10
SYMATTR Value 10
SYMBOL OpAmps\\OP177A -240 384 R0
SYMATTR InstName U2
SYMBOL OpAmps\\OP177A 240 224 R0
WINDOW 0 30 47 Left 2
WINDOW 3 36 76 Left 2
SYMATTR InstName U3
SYMBOL nmos -96 368 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL OpAmps\\OP177A -656 368 M180
SYMATTR InstName U4
SYMBOL res -752 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL res -640 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res -752 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res -592 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1000k
SYMBOL res -512 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Radj
SYMATTR Value 102
SYMBOL npn 256 192 R270
SYMATTR InstName Q1
SYMATTR Value 2SCR582D3
SYMBOL res -80 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL cap 768 224 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res 96 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 112 368 R0
SYMATTR InstName C2
SYMATTR Value 1µ
TEXT -488 -184 Left 2 !.tran 100ms startup
