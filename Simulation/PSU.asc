Version 4
SHEET 1 2200 1176
WIRE 320 128 272 128
WIRE 464 128 464 80
WIRE 464 128 416 128
WIRE 512 128 464 128
WIRE 640 128 640 80
WIRE 640 128 592 128
WIRE 784 128 640 128
WIRE 928 128 784 128
WIRE 640 160 640 128
WIRE 928 160 928 128
WIRE -592 192 -608 192
WIRE -576 192 -592 192
WIRE -448 192 -496 192
WIRE -448 208 -448 192
WIRE 784 224 784 128
WIRE 1056 256 976 256
WIRE 272 272 240 272
WIRE 640 272 640 240
WIRE 640 272 608 272
WIRE 928 272 928 240
WIRE 1056 272 1056 256
WIRE -592 288 -592 192
WIRE -528 288 -592 288
WIRE 368 288 368 192
WIRE 368 288 336 288
WIRE 976 288 976 256
WIRE -368 304 -464 304
WIRE -352 304 -368 304
WIRE -112 304 -144 304
WIRE 16 304 -32 304
WIRE 64 304 16 304
WIRE 192 304 144 304
WIRE 272 304 192 304
WIRE 640 304 640 272
WIRE -560 320 -608 320
WIRE -528 320 -560 320
WIRE 16 368 16 304
WIRE 192 368 192 304
WIRE 976 368 976 336
WIRE 1056 368 1056 352
WIRE 1056 368 976 368
WIRE 784 384 784 288
WIRE 928 384 928 352
WIRE -560 432 -560 320
WIRE -528 432 -560 432
WIRE -368 432 -368 304
WIRE -32 448 -144 448
WIRE 16 512 16 464
WIRE 192 512 192 432
FLAG -160 64 VCC
FLAG -160 144 0
FLAG 272 128 VCC
FLAG 928 384 0
FLAG 304 256 VCC
FLAG 640 384 0
FLAG -64 64 Vref
FLAG -64 144 0
FLAG -144 304 Vref
FLAG -272 64 -VCC
FLAG -272 144 0
FLAG 16 512 0
FLAG 16 64 Iref
FLAG 16 144 0
FLAG -176 416 VCC
FLAG -176 480 -VCC
FLAG -208 432 Iref
FLAG 640 80 RS-
FLAG 464 80 RS+
FLAG -352 304 Isense
FLAG -208 464 Isense
FLAG -688 320 RS-
FLAG -688 192 RS+
FLAG -496 272 -VCC
FLAG -496 336 VCC
FLAG -448 208 0
FLAG 304 320 -VCC
FLAG 608 272 Vsense
FLAG 240 272 Vsense
FLAG 784 384 0
FLAG 192 512 0
SYMBOL voltage -160 48 R0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL res 624 144 R0
SYMATTR InstName R2
SYMATTR Value 120k
SYMBOL res 624 288 R0
SYMATTR InstName R3
SYMATTR Value 30k
SYMBOL voltage -64 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -272 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -1
SYMBOL voltage 16 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 2
SYMBOL res 608 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.01
SYMBOL OpAmps\\OP177A -176 384 R0
SYMATTR InstName U2
SYMBOL OpAmps\\OP177A 304 224 R0
WINDOW 0 30 47 Left 2
WINDOW 3 36 76 Left 2
SYMATTR InstName U3
SYMBOL nmos -32 368 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL OpAmps\\OP177A -496 368 M180
SYMATTR InstName U4
SYMBOL res -592 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL res -480 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res -592 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res -432 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1000k
SYMBOL res -352 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Radj
SYMATTR Value 102
SYMBOL npn 320 192 R270
SYMATTR InstName Q1
SYMATTR Value 2SCR582D3
SYMBOL res -16 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL cap 768 224 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res 160 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 4.7k
SYMBOL cap 176 368 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 912 144 R0
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL sw 928 256 M0
SYMATTR InstName S1
SYMATTR Value SHORT
SYMBOL Misc\\signal 1056 368 M180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 400ms 0 0 10ms)
TEXT 368 536 Left 2 !.tran 1s startup
TEXT 368 560 Left 2 !.model SHORT SW (Ron=1m Roff=10Meg Vt=0.5 Vh=-0.2)
